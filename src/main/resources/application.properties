# ------------------------------------------------
# Application Identity
# ------------------------------------------------
spring.application.name=${SPRING_APP_NAME}
server.port=8080

# ------------------------------------------------
# Database Connection (PostgreSQL)
# ------------------------------------------------
spring.datasource.url=jdbc:sqlserver://${DB_HOST}:${DB_PORT};databaseName=${DB_NAME};encrypt=true;trustServerCertificate=true
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}



spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver



# ------------------------------------------------
# HikariCP Connection Pool
# ------------------------------------------------
spring.datasource.hikari.pool-name=HikariPool
spring.datasource.hikari.maximum-pool-size=20   
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000     
spring.datasource.hikari.max-lifetime=1800000   
spring.datasource.hikari.connection-timeout=20000 

# ------------------------------------------------
# JPA / Hibernate
# ------------------------------------------------
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

# In production: NEVER use create-drop or update (it can wipe data!)
# Use "validate" or "none" (schema managed with Flyway/Liquibase)
spring.jpa.hibernate.ddl-auto=${DB_DDL_AUTO}
spring.jpa.show-sql=${DB_SHOW_SQL}
spring.jpa.properties.hibernate.format_sql=${DB_FORMAT_SQL}
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl


# Connection settings
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
spring.jpa.properties.hibernate.connection.autocommit=false
spring.datasource.hikari.auto-commit=false

# ------------------------------------------------
# Transaction Settings
# ------------------------------------------------
spring.jpa.open-in-view=false  
spring.transaction.default-timeout=30s
spring.transaction.rollback-on-commit-failure=true


# handling the size of file upload here
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB




# =========================
# ? Logging Configuration
# =========================

# Set general Spring Boot log level
logging.level.root=INFO

# Show SQL statements (optional for debugging JPA)
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Enable detailed logging for your project package
# (this ensures your LoggingAspect logs show up)
logging.level.com.hajji.springbootbasics=DEBUG

# Optional: make Tomcat / web logs less noisy
logging.level.org.springframework.web=INFO
logging.level.org.apache.catalina=INFO

# Format: include timestamp, thread, and log level
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
# where to store the logs
logging.file.name=logs/app.log

